name: PR ì œëª© ê²€ì¦

on:
  pull_request:
    types: [opened, edited, synchronize]
    branches: [main, develop]

jobs:
  pr-title-check:
    name: ì§€ë¼ í‹°ì¼“ ID í˜•ì‹ í™•ì¸
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“‹ PR ì œëª© í˜•ì‹ ê²€ì¦
        run: |
          PR_TITLE="${{ github.event.pull_request.title }}"
          # [OMF-157] ë˜ëŠ” [OMF-1234] í˜•ì‹ìœ¼ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸ (ëŒ€ê´„í˜¸ + OMF- + ìˆ«ì + ])
          if ! echo "$PR_TITLE" | grep -qE '^\[OMF-[0-9]+\]'; then
            echo "âŒ PR ì œëª©ì´ ì˜¬ë°”ë¥¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤."
            echo ""
            echo "ì œëª©ì€ ë°˜ë“œì‹œ ì§€ë¼ í‹°ì¼“ IDë¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤."
            echo "ì˜¬ë°”ë¥¸ ì˜ˆ: [OMF-157] í´ë” êµ¬ì¡° ë³€ê²½"
            echo "í˜„ì¬ ì œëª©: $PR_TITLE"
            echo ""
            exit 1
          fi
          echo "âœ… PR ì œëª© í˜•ì‹ì´ ì˜¬ë°”ë¦…ë‹ˆë‹¤: $PR_TITLE"
